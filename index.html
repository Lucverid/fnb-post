<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>F&B POS & Inventory (Firebase)</title>

  <!-- CHART.JS -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root {
      --primary: #facc15;
      --dark: #020617;
      --text: #0f172a;
      --danger: #dc2626;
      --bg-card: #ffffff;
    }

    * { box-sizing: border-box; }

    body {
      font-family: system-ui, sans-serif;
      margin: 0;
      background: radial-gradient(circle at top, #facc15 0, #020617 40%, #020617 100%);
      min-height: 100vh;
      color: var(--text);
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 16px;
    }

    h1 {
      text-align: center;
      color: white;
      font-weight: 700;
      letter-spacing: 1px;
      margin-top: 10px;
    }

    .subtitle {
      color: #fef9c3;
      text-align: center;
      margin-bottom: 15px;
    }

    /* ==== CARD ==== */
    .card {
      background: var(--bg-card);
      padding: 18px;
      margin-bottom: 18px;
      border-radius: 16px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.2);
    }

    .hidden { display:none !important; }

    /* === INPUT === */
    label {
      font-size: 12px;
      color: #6b7280;
    }

    input, select, button {
      width: 100%;
      padding: 9px;
      margin-top: 3px;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      font-size: 14px;
      outline: none;
    }

    input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 4px rgba(250,204,21,0.7);
    }

    button.primary {
      background: var(--primary);
      color: var(--dark);
      font-weight: bold;
      margin-top: 7px;
      cursor: pointer;
    }

    button.secondary {
      background: var(--dark);
      color: white;
      margin-top: 7px;
    }

    button.danger {
      background: var(--danger);
      color: white;
    }

    table {
      width: 100%;
      font-size: 13px;
      border-collapse: collapse;
      border-radius: 12px;
      overflow: hidden;
    }

    th, td {
      border: 1px solid #e5e7eb;
      padding: 6px;
    }

    th { background: #f1f5f9; }

    /* ====== GRID MENU ===== */
    .menu-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 12px;
      margin-top: 10px;
    }

    .menu-card {
      background: white;
      border-radius: 14px;
      padding: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      cursor: pointer;
      transition: .2s;
    }

    .menu-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.25);
    }

    .menu-title {
      font-size: 14px;
      font-weight: 600;
    }

    .menu-price {
      font-size: 13px;
      color: #475569;
    }

    /* CART PANEL */
    .cart-box {
      background: white;
      padding: 12px;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
      margin-top: 12px;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      padding: 6px 0;
      border-bottom: 1px dashed #e5e7eb;
    }

    .cart-item:last-child {
      border-bottom: none;
    }

    .toast-container {
      position: fixed;
      top: 16px;
      right: 16px;
      z-index: 9999;
    }

    .toast {
      background: var(--dark);
      color: white;
      padding: 10px 14px;
      margin-bottom: 6px;
      border-radius: 8px;
    }

    @media(max-width:700px){
      .menu-grid {
        grid-template-columns: repeat(auto-fill, minmax(120px,1fr));
      }
    }
  </style>
</head>

<body>
<div class="toast-container" id="toastContainer"></div>

<div class="container">
  <h1>F&B POS SYSTEM</h1>
  <p class="subtitle">Kasir • Stok • Resep • Dashboard • Opname</p>

  <!-- TOPBAR -->
  <div id="topbar" class="card hidden">
    <span id="topbarUser"></span>
    <button id="btnLogout" class="danger" style="width:auto">Logout</button>
  </div>

  <!-- LOGIN REGISTER -->
  <div id="authCard" class="card">
    <h3>Login / Register</h3>
    <div>
      <label>Email</label>
      <input id="loginEmail" type="email">
      <label>Password</label>
      <input id="loginPassword" type="password">
      <button id="btnLogin" class="primary">Login</button>
    </div>
    <hr>
    <h3>Daftar User Baru</h3>
    <label>Email</label>
    <input id="registerEmail" type="email">
    <label>Password</label>
    <input id="registerPassword" type="password">
    <label>Role</label>
    <select id="registerRole">
      <option value="admin">Admin</option>
      <option value="kasir">Kasir</option>
    </select>
    <button id="btnRegister" class="secondary">Register</button>
  </div>

  <!-- INVENTORY -->
  <div id="inventoryCard" class="card hidden">
    <h3>Manajemen Inventory</h3>

    <label>Nama Item</label>
    <input id="invName" placeholder="Contoh: Beras, Gula">

    <label>Jenis</label>
    <select id="invType">
      <option value="bahan_baku">Bahan Baku</option>
      <option value="menu">Menu</option>
    </select>

    <label>Kategori</label>
    <select id="invCat">
      <option value="makanan">Makanan</option>
      <option value="minuman">Minuman</option>
      <option value="lainnya">Lainnya</option>
    </select>

    <div id="priceGroup">
      <label>Harga Menu</label>
      <input id="invPrice" type="number" placeholder="15000">
    </div>

    <label>Stok Awal</label>
    <input id="invStock" type="number">

    <label>Satuan</label>
    <input id="invUnit" placeholder="kg / g / ml / pcs">

    <label>Minimal Stok</label>
    <input id="invMin" type="number">

    <button id="btnSaveInv" class="primary">Simpan</button>

    <h4>Daftar Item</h4>
    <table>
      <thead>
        <tr>
          <th>Nama</th>
          <th>Jenis</th>
          <th>Kategori</th>
          <th>Harga</th>
          <th>Stok</th>
          <th>Aksi</th>
        </tr>
      </thead>
      <tbody id="invTable"></tbody>
    </table>
  </div>

  <!-- RESEP -->
  <div id="recipeCard" class="card hidden">
    <h3>Resep Menu (BOM)</h3>

    <label>Pilih Menu</label>
    <select id="recipeMenu"></select>

    <label>Pilih Bahan</label>
    <select id="recipeIng"></select>

    <label>Qty / Porsi</label>
    <input id="recipeQty" type="number">

    <button id="btnAddRecipe" class="primary">Tambah</button>

    <table style="margin-top:12px;">
      <thead>
        <tr>
          <th>Bahan</th>
          <th>Qty</th>
          <th>Aksi</th>
        </tr>
      </thead>
      <tbody id="recipeTable"></tbody>
    </table>
  </div>

  <!-- POS / KASIR -->
  <div id="posCard" class="card hidden">
    <h3>Penjualan (Multi Item)</h3>

    <h4>Menu</h4>
    <div id="menuGrid" class="menu-grid"></div>

    <h4>Keranjang</h4>
    <div id="cartBox" class="cart-box"></div>

    <h4>Total Bayar</h4>
    <label>Diskon %</label>
    <input id="cashDisc" type="number">

    <label>Voucher (Rp)</label>
    <input id="cashVoucher" type="number">

    <label>Total</label>
    <input id="cashTotal" disabled>

    <label>Uang Bayar</label>
    <input id="cashPay">

    <label>Kembalian</label>
    <input id="cashChange" disabled>

    <button id="btnPay" class="primary">Simpan Penjualan</button>

    <h4>Struk Terakhir</h4>
    <div id="receiptBox" class="cart-box">Belum ada transaksi</div>
  </div>

  <!-- DASHBOARD -->
  <div id="dashboardCard" class="card hidden">
    <h3>Dashboard Penjualan</h3>
    <canvas id="dailyChart" height="130"></canvas>
    <canvas id="monthlyChart" height="130" style="margin-top:20px;"></canvas>
  </div>

  <!-- OPNAME -->
  <div id="opnameCard" class="card hidden">
    <h3>Stok Opname</h3>

    <table>
      <thead>
        <tr>
          <th>Item</th>
          <th>Stok Sistem</th>
          <th>Stok Fisik</th>
          <th>Selisih</th>
          <th>Aksi</th>
        </tr>
      </thead>
      <tbody id="opnameTable"></tbody>
    </table>
  </div>
</div>

<!-- ========================================================= -->
<!-- JAVASCRIPT AKAN DIISI DI PART 2 DAN PART 3 -->
<!-- ========================================================= -->

</body>
</html>